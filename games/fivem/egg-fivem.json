{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PANEL",
    "meta": {
        "version": "PLCN_v3",
        "update_url": null
    },
    "exported_at": "2026-01-03T14:35:11+00:00",
    "name": "FiveM OWN",
    "author": "contact@ktox.dev",
    "uuid": "99486bc3-4dd0-4f5e-8ef1-c78ae7b4fc85",
    "description": "A new FiveM egg with additional customization and some minor complex functionality. Also now dont puts everything into resource folder but creates a folder server-data and puts git repo in there to ship other files with the repo needed for the server.",
    "image": null,
    "tags": [],
    "features": [],
    "docker_images": {
        "ghcr.io/ktox-dev/games:fivem": "ghcr.io/ktox-dev/games:fivem"
    },
    "file_denylist": [],
    "startup_commands": {
        "Default": "$(pwd)/alpine/opt/cfx-server/ld-musl-x86_64.so.1 --library-path \"$(pwd)/alpine/usr/lib/v8/:$(pwd)/alpine/lib/:$(pwd)/alpine/usr/lib/\" -- $(pwd)/alpine/opt/cfx-server/FXServer +set citizen_dir $(pwd)/alpine/opt/cfx-server/citizen/ $( [ \"$TXADMIN_ENABLE\" == \"1\" ] || printf %s '+exec server-data/server.cfg' )"
    },
    "config": {
        "files": "{}",
        "startup": "{\n    \"done\": \"succeeded. Welcome!\"\n}",
        "logs": "{\n    \"custom\": true,\n    \"location\": \"logs\\/latest.log\"\n}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\r\n# FiveM Installation Script\r\n#\r\n# Server Files: /mnt/server\r\napt update -y\r\n# openssh-client provides ssh-keygen for deploy key generation\r\napt install -y tar xz-utils curl git git-lfs file jq unzip openssh-client\r\n\r\nmkdir -p /mnt/server\r\ncd /mnt/server\r\n\r\nRELEASE_PAGE=$(curl -sSL https://runtime.fivem.net/artifacts/fivem/build_proot_linux/master/?$RANDOM)\r\n\r\n# Check wether to run installation or update version of script\r\nif [ ! -d \"./alpine/\" ] && [ ! -d \"./server-data/\" ]; then\r\n  # Install script\r\n  echo \"Beginning installation of new FiveM server.\"\r\n\r\n  # Grab download link from FIVEM_VERSION\r\n  if [ \"${FIVEM_VERSION}\" == \"latest\" ] || [ -z ${FIVEM_VERSION} ] ; then\r\n    # Grab latest optional artifact if version requested is latest or null\r\n    LATEST_ARTIFACT=$(echo -e \"${RELEASE_PAGE}\" | grep \"LATEST OPTIONAL\" -B1 | grep -Eo 'href=\".*/*.tar.xz\"' | grep -Eo '\".*\"' | sed 's/\\\"//g' | sed 's/\\.\\///1')\r\n    DOWNLOAD_LINK=$(echo https://runtime.fivem.net/artifacts/fivem/build_proot_linux/master/${LATEST_ARTIFACT})\r\n  else\r\n    # Grab specific artifact if it exists\r\n    VERSION_LINK=$(echo -e \"${RELEASE_PAGE}\" | grep -Eo 'href=\".*/*.tar.xz\"' | grep -Eo '\".*\"' | sed 's/\\\"//g' | sed 's/\\.\\///1' | grep ${FIVEM_VERSION})\r\n    if [ \"${VERSION_LINK}\" == \"\" ]; then\r\n      echo -e \"Defaulting to directly downloading artifact as the version requested was not found on page.\"\r\n    else\r\n      DOWNLOAD_LINK=$(echo https://runtime.fivem.net/artifacts/fivem/build_proot_linux/master/${FIVEM_VERSION}/fx.tar.xz)\r\n    fi\r\n  fi\r\n\r\n  # Download artifact and get filetype\r\n  echo -e \"Running curl -sSL ${DOWNLOAD_LINK} -o ${DOWNLOAD_LINK##*/}...\"\r\n  curl -sSL ${DOWNLOAD_LINK} -o ${DOWNLOAD_LINK##*/}\r\n  echo \"Extracting FiveM artifact files...\"\r\n  FILETYPE=$(file -F ',' ${DOWNLOAD_LINK##*/} | cut -d',' -f2 | cut -d' ' -f2)\r\n\r\n  # Unpack artifact depending on filetype\r\n  if [ \"$FILETYPE\" == \"gzip\" ]; then\r\n    tar xzvf ${DOWNLOAD_LINK##*/}\r\n  elif [ \"$FILETYPE\" == \"Zip\" ]; then\r\n    unzip ${DOWNLOAD_LINK##*/}\r\n  elif [ \"$FILETYPE\" == \"XZ\" ]; then\r\n    tar xvf ${DOWNLOAD_LINK##*/}\r\n  else\r\n    echo -e \"Downloaded artifact of unknown filetype. Exiting.\"\r\n    exit 2\r\n  fi\r\n\r\n  # Delete original bash launch script\r\n  rm -rf ${DOWNLOAD_LINK##*/} run.sh\r\n\r\n  # Generate SSH key for git (used later by entrypoint)\r\n  SSH_DIR=\"/mnt/server/.ssh\"\r\n  SSH_KEY=\"${SSH_DIR}/id_ed25519\"\r\n  mkdir -p \"${SSH_DIR}\"\r\n  chmod 700 \"${SSH_DIR}\"\r\n  if [[ ! -f \"${SSH_KEY}\" ]]; then\r\n    ssh-keygen -t ed25519 -N \"\" -C \"pterodactyl-fivem\" -f \"${SSH_KEY}\" >/dev/null\r\n    chmod 600 \"${SSH_KEY}\"\r\n    chmod 644 \"${SSH_KEY}.pub\"\r\n    echo \"==> Add this public key to GitHub deploy keys (read-only is enough):\"\r\n    cat \"${SSH_KEY}.pub\"\r\n  else\r\n    echo \"Existing SSH key detected at ${SSH_KEY}; keeping current key.\"\r\n  fi\r\n\r\n  mkdir -p logs/\r\n  echo \"Installation complete.\"\r\n\r\nelse\r\n  # Update script\r\n  echo \"Beginning update of existing FiveM server artifact.\"\r\n\r\n  # Delete old artifact\r\n  if [ -d \"./alpine/\" ]; then\r\n    echo \"Deleting old artifact...\"\r\n    rm -r ./alpine/\r\n    while [ -d \"./alpine/\" ]; do\r\n      sleep 1s\r\n    done\r\n    echo \"Deleted old artifact files successfully.\"\r\n  fi\r\n\r\n  # Grab download link from FIVEM_VERSION\r\n  if [ \"${FIVEM_VERSION}\" == \"latest\" ] || [ -z ${FIVEM_VERSION} ] ; then\r\n    # Grab latest optional artifact if version requested is latest or null\r\n    LATEST_ARTIFACT=$(echo -e \"${RELEASE_PAGE}\" | grep \"LATEST OPTIONAL\" -B1 | grep -Eo 'href=\".*/*.tar.xz\"' | grep -Eo '\".*\"' | sed 's/\\\"//g' | sed 's/\\.\\///1')\r\n    DOWNLOAD_LINK=$(echo https://runtime.fivem.net/artifacts/fivem/build_proot_linux/master/${LATEST_ARTIFACT})\r\n  else\r\n    # Grab specific artifact if it exists\r\n    VERSION_LINK=$(echo -e \"${RELEASE_PAGE}\" | grep -Eo 'href=\".*/*.tar.xz\"' | grep -Eo '\".*\"' | sed 's/\\\"//g' | sed 's/\\.\\///1' | grep ${FIVEM_VERSION})\r\n    if [ \"${VERSION_LINK}\" == \"\" ]; then\r\n      echo -e \"Defaulting to directly downloading artifact as the version requested was not found on page.\"\r\n    else\r\n      DOWNLOAD_LINK=$(echo https://runtime.fivem.net/artifacts/fivem/build_proot_linux/master/${FIVEM_VERSION}/fx.tar.xz)\r\n    fi\r\n  fi\r\n\r\n  # Download artifact and get filetype\r\n  echo -e \"Running curl -sSL ${DOWNLOAD_LINK} -o ${DOWNLOAD_LINK##*/}...\"\r\n  curl -sSL ${DOWNLOAD_LINK} -o ${DOWNLOAD_LINK##*/}\r\n  echo \"Extracting FiveM artifact files...\"\r\n  FILETYPE=$(file -F ',' ${DOWNLOAD_LINK##*/} | cut -d',' -f2 | cut -d' ' -f2)\r\n\r\n  # Unpack artifact depending on filetype\r\n  if [ \"$FILETYPE\" == \"gzip\" ]; then\r\n    tar xzvf ${DOWNLOAD_LINK##*/}\r\n  elif [ \"$FILETYPE\" == \"Zip\" ]; then\r\n    unzip ${DOWNLOAD_LINK##*/}\r\n  elif [ \"$FILETYPE\" == \"XZ\" ]; then\r\n    tar xvf ${DOWNLOAD_LINK##*/}\r\n  else\r\n    echo -e \"Downloaded artifact of unknown filetype. Exiting.\"\r\n    exit 2\r\n  fi\r\n\r\n  # Delete original bash launch script\r\n  rm -rf ${DOWNLOAD_LINK##*/} run.sh\r\n\r\n  echo \"Update complete.\"\r\n\r\nfi",
            "container": "ghcr.io/parkervcp/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Enable txAdmin",
            "description": "Enables txAdmin.\r\n\r\n(default is off)",
            "env_variable": "TXADMIN_ENABLE",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "boolean"
            ],
            "sort": 1
        },
        {
            "name": "FiveM Version",
            "description": "Downloads the latest or specified FiveM server artifact.\r\n\r\nSet to 'latest' or empty to download the latest optional artifact.\r\nOr specify a direct version to download like this '1383-e5ea040353ce1b8bc86e37982bf5d888938e3096'.\r\n\r\nYou can find the latest version from here - https://runtime.fivem.net/artifacts/fivem/build_proot_linux/master/\r\n\r\nPressing 'Reinstall Server' in 'Settings' will remove the currently installed server artifact and replace it with an updated one.",
            "env_variable": "FIVEM_VERSION",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "nullable",
                "string",
                "max:50"
            ],
            "sort": 2
        },
        {
            "name": "Git Branch",
            "description": "The name of the branch you wish to use. The default will be used if this is not specified.",
            "env_variable": "GIT_BRANCH",
            "default_value": "main",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "nullable",
                "string"
            ],
            "sort": 3
        },
        {
            "name": "Git Enabled",
            "description": "Enabling this will clone or pull the specified repository into /resources on each server startup. If you are installing the server now, this will clone the git repo.",
            "env_variable": "GIT_ENABLED",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "boolean"
            ],
            "sort": 4
        },
        {
            "name": "Git Repository URL",
            "description": "URL to Git repository.\r\n\r\nExample: https://github.com/citizenfx/cfx-server-data",
            "env_variable": "GIT_REPOURL",
            "default_value": "",
            "user_viewable": true,
            "user_editable": false,
            "rules": [
                "nullable",
                "string"
            ],
            "sort": 5
        },
        {
            "name": "Git Token",
            "description": "The password used to authenticate with git.\r\n\r\nIt's best practice to use a Personal Access Token.\r\nhttps://github.com/settings/tokens\r\nhttps://gitlab.com/-/profile/personal_access_tokens",
            "env_variable": "GIT_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "nullable",
                "string"
            ],
            "sort": 6
        },
        {
            "name": "Git Username",
            "description": "The username used to authenticate with git.",
            "env_variable": "GIT_USERNAME",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "nullable",
                "string",
                "max:39"
            ],
            "sort": 7
        },
        {
            "name": "txAdmin Data Path",
            "description": "",
            "env_variable": "TXHOST_DATA_PATH",
            "default_value": "/home/container/txData",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "required",
                "string"
            ],
            "sort": 10
        },
        {
            "name": "txAdmin Interface",
            "description": "",
            "env_variable": "TXHOST_INTERFACE",
            "default_value": "0.0.0.0",
            "user_viewable": true,
            "user_editable": false,
            "rules": [
                "string",
                "max:15",
                "nullable"
            ],
            "sort": 9
        },
        {
            "name": "txAdmin Port",
            "description": "The port for the txAdmin panel.",
            "env_variable": "TXHOST_TXA_PORT",
            "default_value": "40120",
            "user_viewable": true,
            "user_editable": false,
            "rules": [
                "required",
                "string",
                "max:5"
            ],
            "sort": 8
        },
        {
            "name": "txAdmin URL",
            "description": "",
            "env_variable": "TXHOST_TXA_URL",
            "default_value": "https://txadmin.domain.com",
            "user_viewable": true,
            "user_editable": true,
            "rules": [
                "nullable",
                "string"
            ],
            "sort": 11
        }
    ]
}